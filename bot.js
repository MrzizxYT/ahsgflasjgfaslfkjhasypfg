const Discord = require('discord.js');
const client = new Discord.Client();

client.on('ready', () => {
    console.log('I am ready!');
});

client.on('message', message => {
    if (message.content === 'ping') {
    	message.reply('pong');
  	}
});

// THIS  MUST  BE  THIS  WAY
client.login(process.env.BOT_TOKEN);


// say script
var prefix = "--";
client.on('message', message => {
  if (message.author.bot) return;
  if (!message.content.startsWith(prefix)) return;

  let command = message.content.split(" ")[0];
  command = command.slice(prefix.length);

  let args = message.content.split(" ").slice(1);

  if (command == "say") {
   message.channel.sendMessage(args.join("  "))
  }
});



// Servers script

client.on('message', message => {
     if (message.content === "--servers") {
     let embed = new Discord.RichEmbed()
  .setColor("RANDOM")
  .addField("**Servers: **" , client.guilds.size)
  message.channel.sendEmbed(embed);
    }
});


//avatar script

client.on('message', message => {
    if (message.content.startsWith("--avatar")) {
        var mentionned = message.mentions.users.first();
    var x5bzm;
      if(mentionned){
          var x5bzm = mentionned;
      } else {
          var x5bzm = message.author;
          
      }
        const embed = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setImage(`${x5bzm.avatarURL}`)
      message.channel.sendEmbed(embed);
    }
});




ï»¿client.on("guildMemberAdd", member => {
  member.createDM().then(function (channel) {
  return channel.send(`ÙˆÙ„ÙƒÙ… Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ± ${member} `) 
}).catch(console.error)
})



// members script

      client.on('message',function(message) {
  if (message.author.bot) return;


                  if(!message.channel.guild) return;

                    if (message.content === prefix + "members") {
 const embed = new Discord.RichEmbed()

    .setDescription(`**Members info âœ¨
ğŸ’š online:   ${message.guild.members.filter(m=>m.presence.status == 'online').size}
â¤  dnd:       ${message.guild.members.filter(m=>m.presence.status == 'dnd').size}
ğŸ’›  idle:     ${message.guild.members.filter(m=>m.presence.status == 'idle').size}
ğŸ’    membersCount:  ${message.guild.memberCount - message.guild.members.filter(m=>m.user.bot).size}
ğŸ’¡ bots: ${message.guild.members.filter(m=>m.user.bot).size} **`)
         message.channel.send({embed});

    }
      });









//id script

  client.on('message', message => {
var args = message.content.split(" ").slice(1);    
if(message.content.startsWith(prefix + 'id')) {
var year = message.author.createdAt.getFullYear()
var month = message.author.createdAt.getMonth()
var day = message.author.createdAt.getDate()
var men = message.mentions.users.first();  
let args = message.content.split(' ').slice(1).join(' ');
if (args == '') {
var z = message.author;
}else {
var z = message.mentions.users.first();
}

let d = z.createdAt;          
let n = d.toLocaleString();   
let x;                       
let y;                        

if (z.presence.game !== null) {
y = `${z.presence.game.name}`;
} else {
y = "No Playing... |ğŸ’¤.";
}
if (z.bot) {
var w = 'Ø¨ÙˆØª';
}else {
var w = 'Ø¹Ø¶Ùˆ';
}
let embed = new Discord.RichEmbed()
.setColor("#502faf")
.addField('ğŸ”±| Ø§Ø³Ù…Ùƒ:',`**<@` + `${z.id}` + `>**`, true)
.addField('ğŸ›¡| Ø§ÙŠØ¯ÙŠ:', "**"+ `${z.id}` +"**",true)
.addField('â™¨| Playing:','**'+y+'**' , true)
.addField('ğŸ¤–| Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨Ùƒ:',"**"+ w + "**",true)    
.addField('ğŸ“›| Ø§Ù„ÙƒÙˆØ¯ Ø­Ù‚ Ø­Ø³Ø§Ø¨Ùƒ:',"**#" +  `${z.discriminator}**`,true)
.addField('**Ø§Ù„ØªØ§Ø±ÙŠØ­ Ø§Ù„Ø°ÙŠ Ø§Ù†Ø´Ø¦ ÙÙŠÙ‡ Ø­Ø³Ø§Ø¨Ùƒ | ğŸ“† **: ' ,year + "-"+ month +"-"+ day)    
.addField("**ØªØ§Ø±ÙŠØ® Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ø³ÙŠØ±ÙØ±| âŒš   :**", message.member.joinedAt.toLocaleString())    

.addField('**âŒš | ØªØ§Ø±ÙŠØ® Ø§Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„:**', message.author.createdAt.toLocaleString())
.addField("**Ø§Ø®Ø± Ø±Ø³Ø§Ù„Ø© Ù„Ùƒ | ğŸ’¬  :**", message.author.lastMessage)            

.setThumbnail(`${z.avatarURL}`)
.setFooter(message.author.username, message.author.avatarURL)

message.channel.send({embed});
    if (!message) return message.reply('**Ø¶Ø¹ Ø§Ù„Ù…ÙŠÙ†Ø´Ø§Ù† Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­  âŒ **').catch(console.error);

}

});








//server script

client.on('message', function(msg) {
    if(msg.content.startsWith (prefix  + 'server')) {
      let embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setThumbnail(msg.guild.iconURL)
      .setTitle(`Showing Details Of  **${msg.guild.name}*`)
      .addField(':globe_with_meridians:** Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ±ÙØ±**',`[** __${msg.guild.region}__ **]`,true)
      .addField(':medal:** __Ø§Ù„Ø±ØªØ¨__**',`[** __${msg.guild.roles.size}__ **]`,true)
      .addField(':red_circle:**__ Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡__**',`[** __${msg.guild.memberCount}__ **]`,true)
      .addField(':large_blue_circle:**__ Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ø§ÙˆÙ†Ù„Ø§ÙŠÙ†__**',`[** __${msg.guild.members.filter(m=>m.presence.status == 'online').size}__ **]`,true)
      .addField(':pencil:**__ Ø§Ù„Ø±ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ÙŠØ©__**',`[** __${msg.guild.channels.filter(m => m.type === 'text').size}__** ]`,true)
      .addField(':microphone:**__ Ø±ÙˆÙ…Ø§Øª Ø§Ù„ØµÙˆØª__**',`[** __${msg.guild.channels.filter(m => m.type === 'voice').size}__ **]`,true)
      .addField(':crown:**__ Ø§Ù„Ø£ÙˆÙ†Ù€Ø±__**',`**${msg.guild.owner}**`,true)
      .addField(':id:**__ Ø§ÙŠØ¯ÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±__**',`**${msg.guild.id}**`,true)
      .addField(':date:**__ ØªÙ… Ø¹Ù…Ù„ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙŠ__**',msg.guild.createdAt.toLocaleString())
      msg.channel.send({embed:embed});
    }
  });













// ban script

var prefix = "--"
client.on('message', message => {
  if (message.author.x5bz) return;
  if (!message.content.startsWith(prefix)) return;

  let command = message.content.split(" ")[0];
  command = command.slice(prefix.length);

  let args = message.content.split(" ").slice(1);

  if (command == "ban") {
               if(!message.channel.guild) return message.reply('** This command only for servers**');
         
  if(!message.guild.member(message.author).hasPermission("BAN_MEMBERS")) return message.reply("**You Don't Have ` BAN_MEMBERS ` Permission**");
  if(!message.guild.member(client.user).hasPermission("BAN_MEMBERS")) return message.reply("**I Don't Have ` BAN_MEMBERS ` Permission**");
  let user = message.mentions.users.first();
  let reason = message.content.split(" ").slice(2).join(" ");
  /*let b5bzlog = client.channels.find("name", "5bz-log");

  if(!b5bzlog) return message.reply("I've detected that this server doesn't have a 5bz-log text channel.");*/
  if (message.mentions.users.size < 1) return message.reply("**Ù…Ù†Ø´Ù† Ø´Ø®Øµ**");
  if(!reason) return message.reply ("**Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø§Ù„Ø·Ø±Ø¯**");
  if (!message.guild.member(user)
  .bannable) return message.reply("**Ù„Ø§ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø·Ø±Ø¯ Ø´Ø®Øµ Ø§Ø¹Ù„Ù‰ Ù…Ù† Ø±ØªØ¨ØªÙŠ ÙŠØ±Ø¬Ù‡ Ø§Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª Ø±ØªØ¨Ù‡ Ø¹Ø§Ù„ÙŠ**");

  message.guild.member(user).ban(7, user);

  const banembed = new Discord.RichEmbed()
  .setAuthor(`BANNED!`, user.displayAvatarURL)
  .setColor("RANDOM")
  .setTimestamp()
  .addField("**User:**",  '**[ ' + `${user.tag}` + ' ]**')
  .addField("**By:**", '**[ ' + `${message.author.tag}` + ' ]**')
  .addField("**Reason:**", '**[ ' + `${reason}` + ' ]**')
  message.channel.send({
    embed : banembed
  })
}
});



// kick script

client.on('message', message => {
if (message.content.startsWith("--kick")) {
    var mention = message.mentions.members.first();
    if(!mention) return message.channel.send("ÙŠØ¬Ø¨ Ù…Ù†Ø´Ù† Ø§Ù„Ø¹Ø¶Ùˆ");

    mention.kick("By: " + message.author.tag);
    
    message.channel.send("ØªÙ… Ø£Ø¹Ø·Ø§Ø¡ ÙƒÙŠÙƒ Ø§Ù„Ù‰ Ø§Ù„Ø¹Ø¶Ùˆ  ");
};
});


// roll script

client.on('message', function(message) {
    if(message.content.startsWith(prefix + 'roll')) {
        let args = message.content.split(" ").slice(1);
        if (!args[0]) {
            message.channel.send('**Ø­Ø· Ø±Ù‚Ù… Ù…Ø¹ÙŠÙ† ÙŠØªÙ… Ø§Ù„Ø³Ø­Ø¨ Ù…Ù†Ù‡**');
            return;
            }
    message.channel.send(Math.floor(Math.random() * args.join(' ')));
            if (!args[0]) {
          message.edit('1')
          return;
        }
    }
});





// invite script

client.on('message', message => {
  if (true) {
if (message.content === '--invite') {
      message.author.send('  https://discordapp.com/api/oauth2/authorize?client_id=445936658320326656&permissions=8&scope=bot  |  ØªÙØ¶Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨ÙˆØª     ').catch(e => console.log(e.stack));

    }
   } 
  });


client.on('message', message => {
     if (message.content === "--invite") {
     let embed = new Discord.RichEmbed()
  .setAuthor(message.author.username)
  .setColor("#9B59B6")
  .addField(" Done | ØªÙ€Ù€Ù€Ù€Ù…" , " |  ØªÙ€Ù€Ù€Ù€Ù… Ø§Ù„Ø§Ø±Ø³Ù€Ù€Ø§Ù„ ÙÙŠ Ø§Ù„Ø®Ù€Ù€Ø§Øµ")
     
     
     
  message.channel.sendEmbed(embed);
    }
});



// streaming

client.on("ready", () => {
console.log('By : Kyle');
console.log('Osama Tech');
client.user.setPresence({
  status: 'dnd',
  game: {
     type: 0,
     name: '--help | Mrzizx',
     details: `Ù„Ù„Ù‡Ù… Ø£Ø®ØªÙ… Ø¨Ø§Ù„ØµØ§Ù„Ø­Ø§Øª Ø£Ø¹Ù…Ø§Ù„Ù†Ø§`,
     url: 'http://twitch.tv/M7md_Salih',
     state: `ÙÙŠ ÚªÚ¸ Ø³Ù†? Ù‡Ù†Ø¢Úª Ø´Ù‡Ø± ÙŠØ¬Ø¹Ú¸Ù†ÙŠ Ø£Ø¥ÚªØ«Ø± Ù‚Ø±Ø¨Ø§Ù‹ Ù…Ù† Ø±Ø¨ÙŠ {Ø´Ù‡Ø± Ø±Ù…Ø¶Ø¢Ù†}`,
    application_id: '394600839496466443',
     assets: {
        small_image: `444859352093032449`,
        small_text: '2018',
        large_image: `444864778465181706`,
        large_text: `Ramadan Mubarak` }

  }
    });
});




client.on("message", message => {
    var prefix = "--";
 
            var args = message.content.substring(prefix.length).split(" ");
            if (message.content.startsWith(prefix + "clear")) {
   if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.reply('âš  | **Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª**');
        var msg;
        msg = parseInt();
      
      message.channel.fetchMessages({limit: msg}).then(messages => message.channel.bulkDelete(messages)).catch(console.error);
      message.channel.sendMessage("", {embed: {
        title: "Done | ØªÙ€Ù€Ù…",
        color: 0x06DF00,
        description: "ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨Ù†Ø¬Ø§Ø­",
        footer: {
          text: "Mrzizx"
        }
      }}).then(msg => {msg.delete(3000)});
                          }

     
});






client.on('message', message => {
              if(!message.channel.guild) return;
    var prefix = "--";
    if(message.content.startsWith('--bc')) {
    if(!message.channel.guild) return message.channel.send('**Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± ÙÙ‚Ø· Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª**').then(m => m.delete(5000));
  if(!message.member.hasPermission('ADMINISTRATOR')) return      message.channel.send('**Ù„Ù„Ø£Ø³Ù Ù„Ø§ ØªÙ…ØªÙ„Ùƒ ØµÙ„Ø§Ø­ÙŠØ©** `ADMINISTRATOR`' );
    let args = message.content.split(" ").join(" ").slice(2 + prefix.length);
    let copy = "S Bot";
    let request = `Requested By ${message.author.username}`;
    if (!args) return message.reply('**ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ùˆ Ø¬Ù…Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª**');message.channel.send(`**Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³ØªØŸ \nÙ…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª:** \` ${args}\``).then(msg => {
    msg.react('âœ…')
    .then(() => msg.react('âŒ'))
    .then(() =>msg.react('âœ…'))

    let reaction1Filter = (reaction, user) => reaction.emoji.name === 'âœ…' && user.id === message.author.id;
    let reaction2Filter = (reaction, user) => reaction.emoji.name === 'âŒ' && user.id === message.author.id;
       let reaction1 = msg.createReactionCollector(reaction1Filter, { time: 12000 });
    let reaction2 = msg.createReactionCollector(reaction2Filter, { time: 12000 });
    reaction1.on("collect", r => {
    message.channel.send(`â˜‘ | Done ... The Broadcast Message Has Been Sent For ${message.guild.members.size} Members`).then(m => m.delete(5000));
    message.guild.members.forEach(m => {	
    var bc = new
       Discord.RichEmbed()
       .setColor('RANDOM')
       .setTitle('Broadcast')
       .addField('Server', message.guild.name)
       .addField('Sender', message.author.username)
       .addField('Message', args)
       .setImage("https://cdn.discordapp.com/attachments/446020543963987977/460917978045743135/Untitled.png")
    m.send({ embed: bc })
    msg.delete();
    })
    })
    reaction2.on("collect", r => {
    message.channel.send(`**Broadcast Canceled.**`).then(m => m.delete(5000));
    msg.delete();
    })
    })
    }
    });







let rebel;
client.on("ready", async  => {
    let guild = client.guilds.get("461965117920247818");
  let users = guild.members.map(member => member.user.id);
  let i;
  rebel=0;
for (i=0 ; i < users.length ; i++) {
 let   check = guild.members.get(users[i]);
if(!check.voiceChannelID){
        continue;
}else{
  rebel++;
}
}
guild.channels.find('id', 'ID ROOM').setName(" Voiceã€Œ"+rebel+"ã€");
  client.setInterval(() =>{
    let d = Date.now()
  }, 5000);
});
client.on('voiceStateUpdate', (oldMember, newMember) => {
    let guild = client.guilds.get("449193511426981889");
let newUserChannel = newMember.voiceChannel
let oldUserChannel = oldMember.voiceChannel
 if(oldUserChannel === undefined && newUserChannel !== undefined) {
   rebel++;
guild.channels.find('id', 'ID ROOM').setName(" Voiceã€Œ"+rebel+"ã€");
} else if(newUserChannel === undefined){
  rebel--;
guild.channels.find('id', 'ID ROOM').setName(" Voiceã€Œ"+rebel+"ã€");
}
});
client.on('message', Codes => {
  
  if(Codes.content === "--ØµÙˆØª") {
      Codes.channel.send(" Voiceã€Œ"+rebel+"ã€");
}
});

